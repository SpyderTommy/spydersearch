<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Taco Physics Demo</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png">

  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #faf3e0;
      font-family: Arial, sans-serif;
      text-align: center;
    }

    h1 {
      position: absolute;
      top: 10px;
      width: 100%;
      font-size: 48px;
      color: #d96c00;
      text-shadow: 2px 2px #fff;
      z-index: 10;
    }

    #controls {
      position: absolute;
      top: 80px;
      width: 100%;
      color: #333;
      font-size: 20px;
      text-shadow: 1px 1px #fff;
      z-index: 10;
    }

    canvas {
      display: block;
    }
  </style>
</head>
<body>
  <h1>DEMO</h1>
  <div id="controls">
    üñ±Ô∏è Drag the taco with your mouse<br>
    ‚¨ÖÔ∏è ‚û°Ô∏è Move taco | ‚¨ÜÔ∏è Jump
  </div>

  <!-- Matter.js Physics Engine -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>

  <script>
    // Matter.js aliases
    const { Engine, Render, Runner, Bodies, Body, Composite, Mouse, MouseConstraint } = Matter;

    // Engine and world setup
    const engine = Engine.create();
    const { world } = engine;

    // Renderer setup
    const render = Render.create({
      element: document.body,
      engine: engine,
      options: {
        width: window.innerWidth,
        height: window.innerHeight,
        background: '#faf3e0',
        wireframes: false
      }
    });

    Render.run(render);
    const runner = Runner.create();
    Runner.run(runner, engine);

    // Taco body
    const taco = Bodies.rectangle(window.innerWidth / 2, 200, 120, 80, {
      restitution: 0.6,
      friction: 0.8,
      render: {
        sprite: {
          texture: 'https://upload.wikimedia.org/wikipedia/commons/3/3a/Taco_icon.png',
          xScale: 0.3,
          yScale: 0.3
        }
      }
    });

    // Ground and walls
    const ground = Bodies.rectangle(window.innerWidth / 2, window.innerHeight, window.innerWidth, 60, { isStatic: true });
    const leftWall = Bodies.rectangle(0, window.innerHeight / 2, 60, window.innerHeight, { isStatic: true });
    const rightWall = Bodies.rectangle(window.innerWidth, window.innerHeight / 2, 60, window.innerHeight, { isStatic: true });

    Composite.add(world, [taco, ground, leftWall, rightWall]);

    // Mouse controls
    const mouse = Mouse.create(render.canvas);
    const mouseConstraint = MouseConstraint.create(engine, {
      mouse,
      constraint: {
        stiffness: 0.2,
        render: { visible: false }
      }
    });
    Composite.add(world, mouseConstraint);
    render.mouse = mouse;

    // Keyboard controls
    const moveForce = 0.01;
    const jumpForce = 0.03;

    document.addEventListener('keydown', event => {
      switch (event.code) {
        case 'ArrowLeft':
          Body.applyForce(taco, taco.position, { x: -moveForce, y: 0 });
          Body.setAngularVelocity(taco, -0.2); // spin left
          break;
        case 'ArrowRight':
          Body.applyForce(taco, taco.position, { x: moveForce, y: 0 });
          Body.setAngularVelocity(taco, 0.2); // spin right
          break;
        case 'ArrowUp':
          if (taco.position.y > window.innerHeight - 120) {
            Body.applyForce(taco, taco.position, { x: 0, y: -jumpForce });
            Body.setAngularVelocity(taco, 0.4); // spin on jump
          }
          break;
      }
    });

    // Adjust viewport on resize
    window.addEventListener('resize', () => {
      Render.lookAt(render, {
        min: { x: 0, y: 0 },
        max: { x: window.innerWidth, y: window.innerHeight }
      });
    });
  </script>
</body>
</html>
